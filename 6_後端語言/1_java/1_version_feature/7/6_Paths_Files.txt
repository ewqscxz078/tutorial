NIO.2 (New I/O) APIï¼š
	åŠ å¼·äº†æ–‡ä»¶ç³»çµ±å’Œæ–‡ä»¶ I/O æ“ä½œï¼Œæä¾›äº†æ›´å¼·å¤§ã€æ›´éˆæ´»çš„ APIã€‚


temp file : è‡¨æ™‚æ–‡ä»¶å»ºç«‹èˆ‡åˆªé™¤
	try (OutputStream out = Files.newOutputStream(Files.createTempFile("prefix-", ".suffix"))) {
		// ä½¿ç”¨è‡¨æ™‚æ–‡ä»¶é€²è¡Œæ–‡ä»¶æ“ä½œ
	} // è‡¨æ™‚æ–‡ä»¶åœ¨é€™è£¡è¢«è‡ªå‹•åˆªé™¤

========================================================================================================================
================================= nio2 Path ============================================================================
	https://codertw.com/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/282/#outline__1_1
	https://stackoverflow.com/questions/189094/how-to-scan-a-folder-in-java
	https://docs.oracle.com/javase/tutorial/essential/io/walk.html
	https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/essential/io/examples/Copy.java
	https://jakubstas.com/paths_in_nio_2/#.Yag_UNBBw5v
	https://www.baeldung.com/java-io-vs-nio
	https://ithelp.ithome.com.tw/articles/10102562
	https://programdoubledragon.blogspot.com/2018/12/java-nio2.html=
========================================================================================================================
================================= Path =================================================================================
========================================================================================================================
è·¯å¾‘è™•ç†æœ‰é—œ
	å–å¾—æª”å
		String filename = path.getFileName().toString();  // å‚³å› æœ€å¾Œä¸€å±¤çš„è·¯å¾‘å…ƒä»¶(åŒ…å«å‰¯æª”å)
		
	get Path by string
		Path path = Paths.get(...)

	Path è·¯ç¶“éšå±¤
		int levels = path.getNameCount();

	å–å¾—ä¸Šä¸€å±¤
		path.getParent();

	å–å¾— Path å…¶å…„å¼Ÿè·¯å¾‘
		siblingFileName = sourcePath.getFileName() + "xxxx";
		Path siblingPath = sourcePath.resolveSibling(siblingFileName);

	å–å¾— Path å…¶å»¶ä¼¸è·¯å¾‘
		å‡è¨­æœ‰è·¯å¾‘ç‚º xxxxï¼Œå–å¾—å…¶å»¶ä¼¸è·¯å¾‘ç‚º xxxx/yyy
		Path path = Paths.get("xxxx")
		String extendDir = "yyy";
		Path extendPath = sourcePath.resolve(extendDir);

	Path æ¨™æº–æ­£å¸¸åŒ– : è¦ç›®çš„æ˜¯æ¶ˆé™¤è·¯å¾‘ä¸­çš„å†—é¤˜éƒ¨åˆ†ï¼Œä¸¦å°‡å…¶è½‰æ›ç‚ºæ¨™æº–å½¢å¼ã€‚å®ƒåŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š
		path.normalize()
			1.ç§»é™¤è·¯å¾‘ä¸­çš„å¤šé¤˜åˆ†éš”ç¬¦ï¼šå®ƒå°‡è·¯å¾‘ä¸­é€£çºŒçš„å¤šå€‹åˆ†éš”ç¬¦æ›¿æ›ç‚ºå–®å€‹åˆ†éš”ç¬¦ã€‚ä¾‹å¦‚ï¼Œ/dir//file.txtå°‡è¢«è¦ç¯„åŒ–ç‚º/dir/file.txtã€‚

			2.è™•ç†.ï¼ˆç•¶å‰ç›®éŒ„ï¼‰å’Œ..ï¼ˆä¸Šç´šç›®éŒ„ï¼‰ï¼šå®ƒè§£æè·¯å¾‘ä¸­çš„.å’Œ..ç¬¦è™Ÿï¼Œä¸¦å°‡å…¶è½‰æ›ç‚ºå°æ‡‰çš„å¯¦éš›ç›®éŒ„ã€‚ä¾‹å¦‚ï¼Œ/dir/./file.txtå°‡è¢«è¦ç¯„åŒ–ç‚º/dir/file.txtï¼Œè€Œ/dir/../file.txtå°‡è¢«è¦ç¯„åŒ–ç‚º/file.txtã€‚

			3.è™•ç†ç¬¦è™Ÿéˆæ¥ï¼šå¦‚æœè·¯å¾‘ä¸­å­˜åœ¨ç¬¦è™Ÿéˆæ¥ï¼Œå®ƒå°‡å˜—è©¦è§£æç¬¦è™Ÿéˆæ¥ï¼Œå°‡å…¶è½‰æ›ç‚ºå¯¦éš›ç›®æ¨™è·¯å¾‘ã€‚

		æ³¨æ„äº‹é …: åªé€²è¡Œè·¯å¾‘çš„è¦ç¯„åŒ–è™•ç†ï¼Œä¸¦ä¸æª¢æŸ¥è·¯å¾‘æ˜¯å¦å­˜åœ¨æˆ–æ˜¯å¦æœ‰æ•ˆã€‚å®ƒåƒ…å°è·¯å¾‘å­—ç¬¦ä¸²é€²è¡Œè™•ç†ï¼Œä¸¦ä¸å°åº•å±¤æ–‡ä»¶ç³»çµ±é€²è¡Œä»»ä½•æ“ä½œ
		åŠŸèƒ½é¡ä¼¼æ–¼ spring è£¡çš„ StringUtils.cleanPathï¼Œä½†åŠŸèƒ½ç•¥æ–¼å®ƒ

	èµ°è¨ª path
		Path directory = Paths.get("your_directory_path");
			try (Stream<Path> walk = Files.walk(directory)) {
				walk.filter(Files::isRegularFile) // éæ¿¾å‡ºæ™®é€šæ–‡ä»¶
					.filter(path -> {
						String fileName = path.getFileName().toString();
						return fileName.endsWith("axx") || fileName.endsWith("bxx");
					})
					.forEach(path -> System.out.println("æ–‡ä»¶åï¼š" + path));
			} catch (IOException e) {
				e.printStackTrace();
			}

	é¡ä¼¼ rm -rf ${path}ï¼Œä½†ä¸æ˜¯é›¢é–‹ç¨‹åºå¾Œæ‰åˆªé™¤ï¼Œä¸é©ç”¨æ–¼å–®å…ƒæ¸¬è©¦
		public class DirectoryRemover {
			public static void main(String[] args) throws IOException {
				String directoryPath = "/path/to/directory";
				removeDirectory(directoryPath);
			}

			private static void removeDirectory(String directoryPath) throws IOException {
				Path directory = Paths.get(directoryPath);

				if (!Files.exists(directory)) {
					System.out.println("Directory does not exist: " + directoryPath);
					return;
				}

				Files.walkFileTree(directory, new SimpleFileVisitor<Path>() {
					@Override
					public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {
						Files.delete(file);
						System.out.println("Deleted file: " + file);
						return FileVisitResult.CONTINUE;
					}

					@Override
					public FileVisitResult postVisitDirectory(Path dir, IOException exc) throws IOException {
						Files.delete(dir);
						System.out.println("Deleted directory: " + dir);
						return FileVisitResult.CONTINUE;
					}
				});

				System.out.println("Directory and its contents have been removed: " + directoryPath);
			}
		}
		ç­‰æ–¼ org.springframework.util.FileSystemUtils.deleteRecursively(path)

	æª”æ¡ˆè½‰æˆè·¯å¾‘
		File file = new File(....);
		Path path = file.toPath();

	å–å¾—å€’æ•¸ç¬¬äºŒå±¤è·¯å¾‘åç¨±
		public static void main(String[] args) {
			Path path = Paths.get("/a/b/c/d/e");

			// å–å¾—å€’æ•¸ç¬¬ 2 å±¤åç¨±ï¼ˆä¹Ÿå°±æ˜¯ dï¼‰
			int nameCount = path.getNameCount();
			String name = path.getName(nameCount - 2).toString();

			System.out.println(name);  // è¼¸å‡ºï¼šd
		}

========================================================================================================================
================================= nio2 Files ===========================================================================
========================================================================================================================
æª”æ¡ˆè™•ç†æœ‰é—œ
	https://www.baeldung.com/java-file-directory-exists
	Path check is exists
		Path path = Paths.get("does-not-exist.txt");
		assertFalse(Files.exists(path));

		Path tempFile = Files.createTempFile("baeldung", "exist-article");
		assertTrue(Files.exists(tempFile));

		Path tempDirectory = Files.createTempDirectory("baeldung-exists");
		assertTrue(Files.exists(tempDirectory));

	Path æ˜¯å¦ç‚ºç›®éŒ„
		Files.isDirectory(path);

	Path æ˜¯å¦ç‚ºæª”æ¡ˆ
		Files.isRegularFile(path);

	Path æª”æ¡ˆå¤§å°
		Files.size();

	æ˜¯å¦å­˜åœ¨ path
		boolean exist = Files.exists(path);

	Path è½‰æˆæª”æ¡ˆ
		File path.toFile();

	ç”Ÿæˆæš«å­˜é è¨­ä½ç½®ä¸‹æª”æ¡ˆ
		Files.createTempFile("prefix-", ".suffix");

	ç”ŸæˆæŒ‡å®šä½ç½®ä¸‹çš„æš«å­˜æª”æ¡ˆ
		Files.createTempFile(Paths.get("tmpDir"), "prefix-", ".suffix");

	è·¯å¾‘è½‰æˆæª”æ¡ˆå­—å…ƒè™•ç†
		try (BufferedReader reader = Files.newBufferedReader(path)) {

========================================================================================================================
================================= nio2 Path to File ===========================================================================
========================================================================================================================
1.å¯«åˆ° Path è·¯å¾‘ä¸‹çš„å­—ä¸²çµæœå…§å®¹
	import java.nio.file.Files;
	import java.nio.file.Path;
	import java.nio.file.Paths;
	import java.nio.charset.StandardCharsets;
	import java.io.IOException;

	public class WriteToFileExample {
		public static void main(String[] args) {
			Path path = Paths.get("/your/target/path/output.txt");
			String content = "é€™æ˜¯è¦å¯«å…¥çš„å…§å®¹";

			try {
				// è‹¥æª”æ¡ˆä¸å­˜åœ¨æœƒè‡ªå‹•å»ºç«‹ï¼Œé è¨­ç‚ºè¦†å¯«æ¨¡å¼
				Files.write(path, content.getBytes(StandardCharsets.UTF_8));
				// è‹¥è¦é™„åŠ å¯«å…¥ï¼ˆä¸è¦†è“‹èˆŠè³‡æ–™ï¼‰
				// Files.write(path, content.getBytes(StandardCharsets.UTF_8), StandardOpenOption.APPEND, StandardOpenOption.CREATE);
				System.out.println("å¯«å…¥æˆåŠŸï¼");
			} catch (IOException e) {
				e.printStackTrace();
			}
		}
	}

	å¸¸è¦‹æ³¨æ„äº‹é …ï¼š
		* StandardCharsets.UTF_8 æ˜¯å»ºè­°çš„ç·¨ç¢¼æ–¹å¼ï¼Œé¿å…äº‚ç¢¼ã€‚
		* æª”æ¡ˆè·¯å¾‘è‹¥ä¸å­˜åœ¨çš„è©±ï¼Œç›®éŒ„éœ€å…ˆå­˜åœ¨ï¼Œå¦å‰‡æœƒæ‹‹å‡º NoSuchFileExceptionã€‚
		* è‹¥è¦ç¢ºä¿ç›®éŒ„å­˜åœ¨ï¼Œå¯åŠ ä¸Šï¼š
			Files.createDirectories(path.getParent());
				* è‹¥ç›®éŒ„å·²å­˜åœ¨ï¼šæœƒå¿½ç•¥ï¼Œä¸æ‹‹å‡ºä¾‹å¤–ã€‚
				* è‹¥ç›®éŒ„ä¸å­˜åœ¨ï¼šæœƒè‡ªå‹•éè¿´å»ºç«‹æ‰€æœ‰å¿…è¦çš„ç›®éŒ„ã€‚
				* è‹¥è·¯å¾‘ä¸­ä»»ä½•ä¸€å±¤æ˜¯æª”æ¡ˆï¼ˆéç›®éŒ„ï¼‰ï¼šæœƒæ‹‹å‡º FileAlreadyExistsExceptionã€‚

2.è®€å–è·¯å¾‘ä¸‹å…§å®¹å›å‚³ byte[]
	byte[] content = Files.readAllBytes(path);
		é€™æ˜¯æœ€ç›´æ¥ä¸”æ•ˆèƒ½ä¸éŒ¯çš„æ–¹å¼ï¼Œé©ç”¨æ–¼å°è‡³ä¸­å‹æª”æ¡ˆã€‚ å»ºè­°ä¸è¦è¶…éå¹¾ç™¾ MB

3.å¾ä¸€å€‹æª”æ¡ˆçš„ Path è¤‡è£½åˆ°å¦ä¸€å€‹ Path
	Files.copy(sourcePath, targetPath);
	ğŸ“Œ å¸¸ç”¨é¸é … StandardCopyOptionï¼š
		| é¸é …                       | èªªæ˜                                         |
		| -------------------------- | -------------------------------------------- |
		| `REPLACE_EXISTING`         | è‹¥ç›®æ¨™å·²å­˜åœ¨ï¼Œå‰‡è¦†è“‹                         |
		| `COPY_ATTRIBUTES`          | é€£åŒåŸæª”æ¡ˆçš„ metadata ä¸€èµ·è¤‡è£½ï¼ˆä¾‹å¦‚æ™‚é–“æˆ³ï¼‰ |
		| `ATOMIC_MOVE`ï¼ˆç”¨æ–¼ moveï¼‰ | åŸå­ç§»å‹•ï¼ˆç”¨æ–¼ `Files.move()`ï¼‰              |

4.å¾ inputStream å¯«å…¥åˆ° targetPath
	Path targetPath = Paths.get("/opt/tmp/output.txt");

	// å‡è¨­é€™æ˜¯ä½ è¦å¯«å…¥çš„ InputStreamï¼ˆå¯æ›¿æ›ç‚ºä»»ä½•ä¾†æºï¼Œä¾‹å¦‚ MultipartFile.getInputStream()ï¼‰
	try (InputStream inputStream = Files.newInputStream(Paths.get("/opt/tmp/source.txt"))) {
		Files.copy(inputStream, targetPath, StandardCopyOption.REPLACE_EXISTING);
	}

5.Path è®€å–å‡º inputStream å½¢å¼
	InputStream in = Files.newInputStream(path);

6.srcPath å£“ç¸®åˆ° zipPath
	import java.io.*;
	import java.nio.file.*;
	import java.util.zip.*;

	public class ZipFolder {
		public static void zipDirectory(Path sourceDir, Path zipPath) throws IOException {
			try (
				OutputStream fos = Files.newOutputStream(zipPath);
				BufferedOutputStream bos = new BufferedOutputStream(fos);
				ZipOutputStream zos = new ZipOutputStream(bos)
			) {
				Path basePath = sourceDir;

				Files.walk(sourceDir)
					.filter(Files::isRegularFile)
					.forEach(path -> {
						try {
							// å–å¾— zip å…§çš„ç›¸å°è·¯å¾‘ï¼Œä¾‹å¦‚ meta/meta.xml
							Path relativePath = basePath.relativize(path);
							ZipEntry zipEntry = new ZipEntry(relativePath.toString().replace("\\", "/"));
							zos.putNextEntry(zipEntry);

							// å¯«å…¥æª”æ¡ˆå…§å®¹
							Files.copy(path, zos);
							zos.closeEntry();
						} catch (IOException e) {
							throw new UncheckedIOException("å£“ç¸®æª”æ¡ˆå¤±æ•—: " + path, e);
						}
					});
			}
		}

		// ç¯„ä¾‹ä½¿ç”¨
		public static void main(String[] args) throws IOException {
			String uuid = "12345678";
			Path sourceDir = Paths.get("/opt/tmp/" + uuid);
			Path zipPath = Paths.get("/opt/tmp/" + uuid + ".zip");

			zipDirectory(sourceDir, zipPath);
			System.out.println("å£“ç¸®å®Œæˆï¼");
		}
	}

7.å–å¾— Path è·¯å¾‘ä¸‹æ‰€æœ‰æª”æ¡ˆçš„æª”å
	Path dirPath = Paths.get("/opt/tmp/uuid"); // æ›¿æ›ç‚ºä½ è¦çš„ç›®éŒ„è·¯å¾‘

	List<String> fileNames = new ArrayList<>();
	try (Stream<Path> paths = Files.walk(dirPath)) {
		fileNames = paths
			.filter(Files::isRegularFile)
			.map(path -> path.getFileName().toString())
			.collect(Collectors.toList());
	} catch (IOException e) {
		e.printStackTrace(); // æˆ–è¨˜éŒ„éŒ¯èª¤æ—¥èªŒ
	}

========================================================================================================================
zip a file
	https://mkyong.com/java/how-to-compress-files-in-zip-format/


