ref ChatGPT

Spring Cloud Gateway (WebFlux ç‰ˆ) è£¡ï¼ŒGateway æœ¬èº«ä¸æ˜¯å‚³çµ± MVC æ‡‰ç”¨ï¼Œå®ƒæ²’æœ‰ã€Œé¦–é ã€æˆ–éœæ…‹é é¢çš„æ¦‚å¿µã€‚

æ‰€ä»¥ç•¶ä½ ï¼š
	curl -i http://localhost:9001/
		å»æ‰“ Gateway çš„æ ¹è·¯å¾‘ / æ™‚ï¼Œå› ç‚º æ²’æœ‰ä»»ä½• route predicate åŒ¹é… /ï¼Œ
		Gateway æœƒç›´æ¥å› 404 Not Found â€”â€” é€™æ˜¯æ­£å¸¸è¡Œç‚ºã€‚

æœ‰å¹¾å€‹é¸é …
	1.åŠ ä¸€å€‹é¦–é  route
		å¦‚æœä½ æƒ³æ‰“ / ä¹Ÿèƒ½æœ‰æ±è¥¿å›ï¼Œå¯ä»¥åœ¨ application.yml è£œä¸€å€‹ routeï¼Œè®“ / ç›´æ¥è½‰ç™¼åˆ°æŸå€‹å¾Œç«¯æœå‹™ï¼š
			spring:
			  cloud:
				gateway:
				  routes:
					- id: root-home
					  uri: http://localhost:8080   # ä½ çš„å¾Œç«¯é¦–é æœå‹™
					  predicates:
						- Path=/
	
	2.è‡ªè¨‚ Fallback Handler
		å¯«å€‹ @RestController æˆ– HandlerFunction<ServerResponse>ï¼Œè™•ç†æ²’æœ‰åŒ¹é… route çš„è«‹æ±‚ã€‚
			@RestController
			public class HomeController {
				@GetMapping("/")
				public String home() {
					return "Spring Cloud Gateway is running";
				}
			}
		é€™æ¨£ / å°±æœ‰å€‹è¨Šæ¯å›æ‡‰ï¼Œè€Œå…¶ä»–è·¯å¾‘é‚„æ˜¯äº¤çµ¦ Gateway routeã€‚
	
	3.è®“ / è‡ªå‹•è·³è½‰
		å¦‚æœä½ åªæ˜¯å¸Œæœ› / è‡ªå‹•è·³åˆ°æŸå€‹ gateway è·¯å¾‘ï¼Œå¯ä»¥å¯«ä¸€å€‹ RedirectFilter æˆ–ç°¡å–®åœ¨ HomeController è£¡ï¼š
			@GetMapping("/")
			public Mono<Void> redirect(ServerHttpResponse response) {
				response.setStatusCode(HttpStatus.FOUND);
				response.getHeaders().setLocation(URI.create("/your/api"));
				return response.setComplete();
			}
	ğŸ‘‰ ç¸½çµï¼š
		Spring Cloud Gateway é è¨­æ²’æœ‰é¦–é ï¼Œæ‰“æ ¹ç›®éŒ„ / æœƒ 404 æ˜¯é æœŸçš„ã€‚
		å¦‚æœä½ è¦æœ‰é¦–é /å¥åº·æª¢æŸ¥/è½‰è·³ï¼Œå¾—è‡ªå·±è£œä¸Šä¸€å€‹ route æˆ– controllerã€‚

é©åˆæƒ…å¢ƒ
	é©åˆ è£œä¸€å€‹ route çš„æƒ…å¢ƒ
		* ä½ å¸Œæœ› / ç›´æ¥ä»£ç†åˆ°æŸå€‹ã€ŒçœŸå¯¦å¾Œç«¯ã€çš„é¦–é ï¼ˆä¾‹å¦‚ UIã€Landing Pageã€Docsï¼‰ã€‚
		* Gateway æœ¬èº«ä¸è©²å›æ‡‰å…§å®¹ï¼Œåªæ˜¯ã€Œè½‰é€ã€ã€‚
		* å¥½è™•ï¼šä¿æŒ Gateway çš„è·è²¬å–®ç´”ï¼ˆç´”ç²¹åšè½‰ç™¼ï¼‰ã€‚
		* å£è™•ï¼šå¦‚æœå¾Œç«¯æ›æ‰ï¼Œé€£ Gateway / ä¹Ÿæœƒè®Š 502ã€‚

	é©åˆ è£œä¸€å€‹ controller çš„æƒ…å¢ƒ
		* ä½ åªæ˜¯è¦è®“ / ä¸è¦å› 404ï¼Œå›ä¸€å€‹å¥åº·è¨Šæ¯æˆ–ç°¡å–® JSONã€‚
		* ä½ æƒ³è®“ / ç”¨ä¾†å¥åº·æª¢æŸ¥ï¼ˆä¾‹å¦‚ k8s liveness probeï¼‰ã€‚
		* å¥½è™•ï¼šGateway å•Ÿå‹•å°±èƒ½ç›´æ¥å›æ‡‰ï¼Œä¸ä¾è³´å¾Œç«¯ã€‚
		* å£è™•ï¼šGateway æœ¬èº«é–‹å§‹å¤šåšã€Œéè½‰ç™¼ã€çš„äº‹ï¼Œè·è²¬ç¨å¾®æ“´å¼µã€‚

	âœ… ChatGPTå»ºè­°ï¼š
		å¦‚æœ / æ˜¯ å°å¤–å…¥å£çš„é¦–é ï¼ˆUIã€Docsï¼‰ï¼Œè«‹ç”¨ route â†’ ä¿æŒ Gatewayã€Œåªè½‰é€ã€çš„å®šä½ã€‚
		å¦‚æœ / åªæ˜¯ å¥åº·æª¢æŸ¥æˆ–ä½”ä½è¨Šæ¯ï¼Œè«‹ç”¨ controller â†’ ç°¡å–®å¿«é€Ÿã€ä¸ä¾è³´å¾Œç«¯ã€‚